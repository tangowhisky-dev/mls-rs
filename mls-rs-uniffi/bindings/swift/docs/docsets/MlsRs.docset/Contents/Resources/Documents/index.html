<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MlsRs  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/github.min.css">
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="MlsRs  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          MlsRs Docs
        </a>
         (76% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/awslabs/mls-rs">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">MlsRs</a>
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Core%20Classes.html">Core Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Client.html">Client</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Group.html">Group</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Core%20Classes.html#/s:5MlsRs7MessageC">Message</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Classes.html#/s:5MlsRs9ExtensionC">Extension</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Other%20Classes.html#/s:5MlsRs13ExtensionListC">ExtensionList</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='mls-rs-swift-bindings' class='heading'>MLS-RS Swift Bindings</h1>

<p>This package provides Swift bindings for the <a href="https://github.com/awslabs/mls-rs">mls-rs</a> Rust library, enabling iOS and macOS developers to use the Message Layer Security (MLS) protocol in their applications.</p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li><strong>Native iOS and macOS Support</strong>: Compiled for iOS 17.0+ and macOS 14.0+</li>
<li><strong>CryptoKit Integration</strong>: Uses Apple&rsquo;s CryptoKit framework for cryptographic operations</li>
<li><strong>Universal Framework</strong>: Single XCFramework supporting iOS Device (ARM64), iOS Simulator (ARM64+x86_64), and macOS (ARM64+x86_64)</li>
<li><strong>Swift Package Manager</strong>: Easy integration with SPM</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>Add this package to your project using Xcode or by adding it to your <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">path</span><span class="p">:</span> <span class="s">"path/to/mls-rs-swift"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>

<p>Then add the library to your target:</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">target</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"YourTarget"</span><span class="p">,</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">product</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"MlsRs"</span><span class="p">,</span> <span class="nv">package</span><span class="p">:</span> <span class="s">"mls-rs-swift"</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>iOS 17.0+ or macOS 14.0+</li>
<li>Xcode 15.0+</li>
<li>Swift 5.9+</li>
</ul>
<h2 id='quick-start' class='heading'>Quick Start</h2>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">MlsRs</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="c1">// Generate a signature keypair</span>
    <span class="k">let</span> <span class="nv">keypair</span> <span class="o">=</span> <span class="k">try</span> <span class="nf">generateSignatureKeypair</span><span class="p">(</span><span class="nv">cipherSuite</span><span class="p">:</span> <span class="o">.</span><span class="n">curve25519Aes128</span><span class="p">)</span>

    <span class="c1">// Create client configuration</span>
    <span class="k">let</span> <span class="nv">config</span> <span class="o">=</span> <span class="nf">clientConfigDefault</span><span class="p">()</span>

    <span class="c1">// Create a client</span>
    <span class="k">let</span> <span class="nv">clientId</span> <span class="o">=</span> <span class="s">"alice"</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span>
    <span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="kt">Client</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="n">clientId</span><span class="p">,</span> <span class="nv">signatureKeypair</span><span class="p">:</span> <span class="n">keypair</span><span class="p">,</span> <span class="nv">clientConfig</span><span class="p">:</span> <span class="n">config</span><span class="p">)</span>

    <span class="c1">// Create a group</span>
    <span class="k">let</span> <span class="nv">group</span> <span class="o">=</span> <span class="k">try</span> <span class="n">client</span><span class="o">.</span><span class="nf">createGroup</span><span class="p">(</span><span class="nv">groupId</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>

    <span class="c1">// Encrypt a message</span>
    <span class="k">let</span> <span class="nv">message</span> <span class="o">=</span> <span class="s">"Hello, MLS!"</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span>
    <span class="k">let</span> <span class="nv">encryptedMessage</span> <span class="o">=</span> <span class="k">try</span> <span class="n">group</span><span class="o">.</span><span class="nf">encryptApplicationMessage</span><span class="p">(</span><span class="nv">message</span><span class="p">:</span> <span class="n">message</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="s">"Message encrypted successfully!"</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">MlsError</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"MLS Error: </span><span class="se">\\</span><span class="s">(error)"</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Unexpected error: </span><span class="se">\\</span><span class="s">(error)"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h2 id='api-overview' class='heading'>API Overview</h2>
<h3 id='core-types' class='heading'>Core Types</h3>

<ul>
<li><strong><code><a href="Classes/Client.html">Client</a></code></strong>: Main client for MLS operations</li>
<li><strong><code><a href="Classes/Group.html">Group</a></code></strong>: Represents an MLS group for messaging</li>
<li><strong><code><a href="Core%20Classes.html#/s:5MlsRs7MessageC">Message</a></code></strong>: Encrypted MLS messages</li>
<li><strong><code>CipherSuite</code></strong>: Supported cipher suites (currently <code>.curve25519Aes128</code>)</li>
<li><strong><code>MlsError</code></strong>: Error types for MLS operations</li>
</ul>
<h3 id='key-functions' class='heading'>Key Functions</h3>

<ul>
<li><strong><code>generateSignatureKeypair(cipherSuite:)</code></strong>: Generate signing keypairs</li>
<li><strong><code>clientConfigDefault()</code></strong>: Get default client configuration</li>
<li><strong><code>Client(id:signatureKeypair:clientConfig:)</code></strong>: Create MLS client</li>
<li><strong><code>client.createGroup(groupId:)</code></strong>: Create new MLS group</li>
<li><strong><code>group.encryptApplicationMessage(message:)</code></strong>: Encrypt messages</li>
<li><strong><code>group.processIncomingMessage(message:)</code></strong>: Process received messages</li>
</ul>
<h2 id='error-handling' class='heading'>Error Handling</h2>

<p>The bindings use Swift&rsquo;s error handling with the custom <code>MlsError</code> type:</p>
<pre class="highlight swift"><code><span class="k">do</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">group</span> <span class="o">=</span> <span class="k">try</span> <span class="n">client</span><span class="o">.</span><span class="nf">createGroup</span><span class="p">(</span><span class="nv">groupId</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="c1">// ... use group</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">MlsError</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="n">error</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="kt">MlsError</span><span class="p">(</span><span class="k">let</span> <span class="nv">message</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"MLS Protocol Error: </span><span class="se">\\</span><span class="s">(message)"</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="kt">AnyError</span><span class="p">(</span><span class="k">let</span> <span class="nv">message</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"General Error: </span><span class="se">\\</span><span class="s">(message)"</span><span class="p">)</span>
    <span class="c1">// ... handle other error cases</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='architecture' class='heading'>Architecture</h2>

<p>The Swift bindings are built using <a href="https://github.com/mozilla/uniffi-rs">UniFFI</a> which automatically generates Swift code from Rust interfaces. The architecture consists of:</p>

<ol>
<li><strong>Rust Core</strong>: The mls-rs library compiled to a universal static library</li>
<li><strong>C FFI Layer</strong>: Generated C headers for foreign function interface</li>
<li><strong>XCFramework</strong>: Universal framework containing all platform binaries</li>
<li><strong>Swift Bindings</strong>: Generated Swift code providing type-safe APIs</li>
</ol>
<h2 id='building-from-source' class='heading'>Building from Source</h2>

<p>To rebuild the bindings:</p>
<pre class="highlight shell"><code><span class="c"># Build the Rust library with CryptoKit provider</span>
<span class="nb">cd </span>mls-rs-uniffi
cargo build <span class="nt">--release</span> <span class="nt">--features</span> cryptokit

<span class="c"># Generate Swift bindings</span>
cargo run <span class="nt">--bin</span> uniffi-bindgen generate <span class="nt">--library</span> target/release/libmls_rs_uniffi.dylib <span class="nt">--language</span> swift <span class="nt">--out-dir</span> bindings/swift/Sources/MlsRs

<span class="c"># Create XCFramework</span>
./build-xcframework.sh
</code></pre>
<h2 id='testing' class='heading'>Testing</h2>

<p>Run the test suite:</p>
<pre class="highlight shell"><code><span class="nb">cd </span>bindings/swift
swift <span class="nb">test</span>
</code></pre>

<p>Run the example:</p>
<pre class="highlight shell"><code>swift run MLSExample
</code></pre>
<h2 id='license' class='heading'>License</h2>

<p>This project is licensed under the same terms as mls-rs. See the <a href="../../LICENSE-apache">LICENSE</a> and <a href="../../LICENSE-mit">LICENSE-MIT</a> files for details.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>Contributions are welcome! Please see <a href="../../CONTRIBUTING.md">CONTRIBUTING.md</a> for guidelines.</p>
<h2 id='support' class='heading'>Support</h2>

<p>For issues related to the Swift bindings, please file an issue in the <a href="https://github.com/awslabs/mls-rs/issues">mls-rs repository</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>© 2025 AWS Labs. Licensed under Apache 2.0 or MIT.</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.15.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
